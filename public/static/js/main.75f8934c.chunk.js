(this["webpackJsonpfullstack-frontend"]=this["webpackJsonpfullstack-frontend"]||[]).push([[0],{120:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(12),r=n.n(a),s=(n(120),n(15)),i=n(27),o=n(16),j=n(101),l=n.n(j),d=Object(c.createContext)(),b="[AUTH] LOGIN",u="[AUTH] LOGOUT",h=n(1),O=function(){var e=Object(o.g)(),t=Object(c.useContext)(d),n=t.user,a=n.logged,r=n.role,s=n.firstName,j=n.lastName,b=t.dispatch;return Object(h.jsx)("div",{children:Object(h.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:Object(h.jsxs)("div",{className:"container-fluid",children:[Object(h.jsx)("div",{className:"navbar-brand",children:a?"Welcome: ".concat(s," ").concat(j):""}),Object(h.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(h.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(i.b,{exact:!0,activeClassName:"active",className:"nav-link ",to:"/",children:"Home"})}),a?null:Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(i.b,{exact:!0,activeClassName:"active",className:"nav-link ",to:"/login",children:"Login"})}),a&&"admin"===r?Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(i.b,{exact:!0,activeClassName:"active",className:"nav-link ",to:"/users",children:"Users"})}):null,a?Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(i.b,{exact:!0,activeClassName:"active",className:"nav-link ",to:"/categories",children:"Categories"})}):null,a?Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(i.b,{exact:!0,activeClassName:"active",className:"nav-link ",to:"/posts",children:"Posts"})}):null,a?Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("button",{type:"button",className:"btn btn-outline-warning",onClick:function(){l.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes!",cancelButtonText:"Cancel"}).then((function(t){t.isConfirmed&&(b({type:u}),e.replace("/login"))}))},children:"Logout"})}):null]})})]})})})},x=n(253),m=n(257),p=n(64),f=n(258),v=n(259),g=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){var e={"Content-Type":"application/json",Accept:"application/json",signal:(new AbortController).signal};fetch("".concat("https://fs-posts.herokuapp.com/api","/post"),e).then((function(e){return e.json()})).then((function(e){var t=e.posts;a(t)}))}),[]),n.length>0?n.map((function(e){return Object(h.jsxs)("div",{children:[Object(h.jsx)("br",{}),Object(h.jsxs)(x.a,{children:[Object(h.jsx)(m.a,{title:Object(h.jsx)(p.a,{variant:"h4",align:"center",children:"".concat(e.title.toUpperCase())}),subheader:Object(h.jsx)(p.a,{children:"Category: ".concat(e.category.description)})}),Object(h.jsx)(f.a,{children:Object(h.jsx)(p.a,{variant:"body1",component:"p",align:"justify",paragraph:!0,children:"".concat(e.description)})}),Object(h.jsx)(v.a,{disableSpacing:!0,children:Object(h.jsxs)(p.a,{variant:"caption",children:["By: ".concat(e.user.firstName," ").concat(e.user.lastName," "),Object(h.jsx)("br",{}),"Created At: ".concat(new Date(e.createdAt)),Object(h.jsx)("br",{}),"Updated At: ".concat(new Date(e.updatedAt))]})})]}),Object(h.jsx)("br",{})]},e.id)})):Object(h.jsx)("div",{children:Object(h.jsx)("h3",{children:"No Posts yet...!"})})},y=function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(O,{}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-2"}),Object(h.jsx)("div",{className:"col-8",children:Object(h.jsx)(g,{})}),Object(h.jsx)("div",{className:"col-2"})]})]})},N=n(11),C=n.n(N),k=n(21),w=n(28),E=n(13),T=n(19),S=n.n(T),A=n(219),B=n(224),P=n(220),D=n(221),W=n(260),U=function(){var e=Object(o.g)(),t=Object(c.useContext)(d).dispatch,n=Object(c.useState)({email:"",password:""}),a=Object(s.a)(n,2),r=a[0],i=a[1],j=function(e){var t=e.target;i(Object(E.a)(Object(E.a)({},r),{},Object(w.a)({},t.name,t.value)))},l=r.email,u=r.password,O=function(){var n=Object(k.a)(C.a.mark((function n(c){var a,s,i;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.preventDefault(),a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},n.next=4,fetch("".concat("https://fs-posts.herokuapp.com/api","/auth"),a);case 4:return s=n.sent,n.next=7,s.json();case 7:i=n.sent,200!==s.status?S.a.fire("Oops...","".concat(i.msg),"error"):(t({type:b,payload:{uid:i.uid,firstName:i.firstName,lastName:i.lastName,email:i.email,role:i.role,token:i.token}}),e.replace("/"));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)("br",{}),Object(h.jsx)("form",{onSubmit:O,children:Object(h.jsxs)(x.a,{children:[Object(h.jsx)(m.a,{title:"LOGIN"}),Object(h.jsxs)(f.a,{children:[Object(h.jsxs)(A.a,{fullWidth:!0,required:!0,children:[Object(h.jsx)(B.a,{htmlFor:"email",children:"Email address"}),Object(h.jsx)(P.a,{id:"email","aria-describedby":"my-helper-text",type:"email",name:"email",value:l,onChange:j}),Object(h.jsx)(D.a,{id:"my-helper-text",children:"example@example.com"})]}),Object(h.jsxs)(A.a,{fullWidth:!0,required:!0,children:[Object(h.jsx)(B.a,{htmlFor:"password",children:"Password"}),Object(h.jsx)(P.a,{id:"password",type:"password",name:"password",value:u,onChange:j})]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)(W.a,{variant:"contained",color:"primary",type:"submit",children:"Login"})]})]})})]})},F=function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(O,{}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-4"}),Object(h.jsx)("div",{className:"col-4",children:Object(h.jsx)(U,{})}),Object(h.jsx)("div",{className:"col-4"})]})]})},L=n(223),q=n(269),I=n(261),J=n(262),G=n(263),Y=n(264),R=n(265),H=n(266),_=n(267),z=n(44),K=n.n(z),M=n(45),Q=n.n(M),V=n(106),X=n.n(V),Z="https://fs-posts.herokuapp.com/api",$=function(){var e=Object(c.useContext)(d).user,t=Object(c.useState)([]),n=Object(s.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)({}),o=Object(s.a)(i,2),j=o[0],l=o[1],b=Object(c.useState)(!1),u=Object(s.a)(b,2),p=u[0],v=u[1],g=Object(c.useState)({firstName:"",lastName:"",email:"",password:"",role:"editor",id:""}),y=Object(s.a)(g,2),N=y[0],T=y[1],D=function(e){var t=e.target;T(Object(E.a)(Object(E.a)({},N),{},Object(w.a)({},t.name,t.value)))},U=function(){var t=Object(k.a)(C.a.mark((function t(n){var c,a,r,s,i;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!F()){t.next=19;break}if(c={method:p?"PUT":"POST",headers:{"Content-Type":"application/json","x-token":"".concat(e.token)},body:JSON.stringify(N)},p){t.next=14;break}return t.next=6,fetch("".concat(Z,"/auth/new"),c);case 6:return a=t.sent,t.next=9,a.json();case 9:r=t.sent,s=r.msg,201!==a.status?z("Error!",s):(z("Ok","User has been added"),V(),M(),v(!1)),t.next=19;break;case 14:return i=N.id,t.next=17,fetch("".concat(Z,"/auth/").concat(i),c);case 17:200!==t.sent.status?z("Error!","Error has occurred contact your admin"):(z("Ok","User has been edited"),V(),M());case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=function(){return 0===$.trim().length||$.trim().length<3?(z("Error!","Write a valid name"),!1):0===ee.trim().length||ee.trim().length<3?(z("Error!","Write a valid Last name"),!1):X.a.isEmail(te)?ce.length<6?(z("Error!","password must be at least 6 characters"),!1):(0===ne.trim().length&&z("Error!","select role"),!0):(z("Error!","email is not valid"),!1)},z=function(e,t){S.a.fire({title:e,text:t,timer:2e3,position:"bottom-right",timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1}).then((function(e){e.dismiss,S.a.DismissReason.timer}))},M=function(){T({firstName:"",lastName:"",email:"",password:"",role:"",id:""})},V=function(){var t=Object(k.a)(C.a.mark((function t(){var n,c,a,s;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"GET",headers:{"Content-Type":"application/json","x-token":"".concat(e.token)}},t.next=3,fetch("".concat(Z,"/auth"),n);case 3:return c=t.sent,t.next=6,c.json();case 6:a=t.sent,s=a.users,r(s);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),$=N.firstName,ee=N.lastName,te=N.email,ne=N.role,ce=N.password;Object(c.useEffect)((function(){V()}),[j]);var ae=function(){var t=Object(k.a)(C.a.mark((function t(n){var c,a,r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={method:"DELETE",headers:{"Content-Type":"application/json","x-token":"".concat(e.token)}},t.next=3,fetch("".concat(Z,"/auth/").concat(n),c);case 3:return a=t.sent,t.next=6,a.json();case 6:r=t.sent,l(r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)(O,{}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-4",children:Object(h.jsx)("form",{onSubmit:U,children:Object(h.jsxs)(x.a,{children:[Object(h.jsx)(m.a,{title:p?"Edit User":"Add User "}),Object(h.jsxs)(f.a,{children:[Object(h.jsxs)(A.a,{fullWidth:!0,required:!0,children:[Object(h.jsx)(B.a,{htmlFor:"firstName",children:"First Name"}),Object(h.jsx)(P.a,{id:"firstName","aria-describedby":"my-helper-text",type:"firstName",name:"firstName",value:$,onChange:D})]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsxs)(A.a,{fullWidth:!0,required:!0,children:[Object(h.jsx)(B.a,{htmlFor:"lastName",children:"Last Name"}),Object(h.jsx)(P.a,{id:"lastName","aria-describedby":"my-helper-text",type:"lastName",name:"lastName",value:ee,onChange:D})]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsxs)(A.a,{fullWidth:!0,required:!0,children:[Object(h.jsx)(B.a,{htmlFor:"email",children:"Email"}),Object(h.jsx)(P.a,{id:"email","aria-describedby":"my-helper-text",type:"email",name:"email",value:te,onChange:D})]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsxs)(A.a,{fullWidth:!0,required:!0,children:[Object(h.jsx)(B.a,{htmlFor:"password",children:"Password"}),Object(h.jsx)(P.a,{type:"password",id:"password","aria-describedby":"my-helper-text",name:"password",value:ce,onChange:D})]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsxs)(A.a,{fullWidth:!0,required:!0,children:[Object(h.jsx)(B.a,{id:"role",children:"Role"}),Object(h.jsxs)(L.a,{labelId:"role",id:"role",value:ne,onChange:function(e){var t=e.target;T(Object(E.a)(Object(E.a)({},N),{},{role:t.value}))},children:[Object(h.jsx)(q.a,{value:"admin",children:"Admin"}),Object(h.jsx)(q.a,{value:"editor",children:"Editor"})]})]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),"\xa0",Object(h.jsx)(W.a,{variant:"contained",color:"primary",type:"submit",children:p?"Edit":"Save"})]})]})})}),Object(h.jsx)("div",{className:"col-8",children:Object(h.jsx)(I.a,{children:Object(h.jsxs)(J.a,{"aria-label":"users table",children:[Object(h.jsx)(G.a,{children:Object(h.jsxs)(Y.a,{children:[Object(h.jsx)(R.a,{children:"First Name"}),Object(h.jsx)(R.a,{children:"Last Name"}),Object(h.jsx)(R.a,{children:"Email"}),Object(h.jsx)(R.a,{children:"Role"}),Object(h.jsx)(R.a,{children:"Actions"})]})}),Object(h.jsx)(H.a,{children:0===a.length?Object(h.jsxs)(Y.a,{children:[Object(h.jsx)(R.a,{children:"No data"}),Object(h.jsx)(R.a,{children:"No data"}),Object(h.jsx)(R.a,{children:"No data"}),Object(h.jsx)(R.a,{children:"No data"}),Object(h.jsx)(R.a,{children:"No data"})]}):a.map((function(e){return Object(h.jsxs)(Y.a,{children:[Object(h.jsx)(R.a,{component:"th",scope:"row",children:e.firstName}),Object(h.jsx)(R.a,{children:e.lastName}),Object(h.jsx)(R.a,{children:e.email}),Object(h.jsx)(R.a,{children:e.role}),Object(h.jsxs)(R.a,{children:[Object(h.jsx)(_.a,{"aria-label":"delete",onClick:function(){return t=e.id,void S.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&(ae(t),S.a.fire("Deleted!",j.msg,"success"))}));var t},children:Object(h.jsx)(K.a,{})}),Object(h.jsx)(_.a,{"aria-label":"edit",onClick:function(){return function(e){T(e),v(!0)}(e)},children:Object(h.jsx)(Q.a,{})})]})]},e.id)}))})]})})})]})]})},ee="https://fs-posts.herokuapp.com/api",te=function(){var e=Object(c.useContext)(d).user,t=Object(c.useState)([]),n=Object(s.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)({}),o=Object(s.a)(i,2),j=o[0],l=o[1],b=Object(c.useState)(!1),u=Object(s.a)(b,2),p=u[0],v=u[1],g=Object(c.useState)({description:"",id:""}),y=Object(s.a)(g,2),N=y[0],T=y[1],D=function(){var t=Object(k.a)(C.a.mark((function t(n){var c,a,r,s,i;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!U()){t.next=19;break}if(c={method:p?"PUT":"POST",headers:{"Content-Type":"application/json","x-token":"".concat(e.token)},body:JSON.stringify(N)},p){t.next=14;break}return t.next=6,fetch("".concat(ee,"/category"),c);case 6:return a=t.sent,t.next=9,a.json();case 9:r=t.sent,s=r.msg,201!==a.status?F("Error!",s):(F("Ok","Category has been added"),q(),L(),v(!1)),t.next=19;break;case 14:return i=N.id,t.next=17,fetch("".concat(ee,"/category/").concat(i),c);case 17:200!==t.sent.status?F("Error!","Error has occurred contact your admin"):(F("Ok","Category has been edited"),q(),L());case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),U=function(){return!(0===z.trim().length||z.trim().length<3)||(F("Error!","Write a valid description"),!1)},F=function(e,t){S.a.fire({title:e,text:t,timer:2e3,position:"bottom-right",timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1}).then((function(e){e.dismiss,S.a.DismissReason.timer}))},L=function(){T({description:"",id:""})},q=function(){var t=Object(k.a)(C.a.mark((function t(){var n,c,a,s;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"GET",headers:{"Content-Type":"application/json","x-token":"".concat(e.token)}},t.next=3,fetch("".concat(ee,"/category"),n);case 3:return c=t.sent,t.next=6,c.json();case 6:a=t.sent,s=a.categories,r(s);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),z=N.description;Object(c.useEffect)((function(){q()}),[j]);var M=function(){var t=Object(k.a)(C.a.mark((function t(n){var c,a,r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={method:"DELETE",headers:{"Content-Type":"application/json","x-token":"".concat(e.token)}},t.next=3,fetch("".concat(ee,"/category/").concat(n),c);case 3:return a=t.sent,t.next=6,a.json();case 6:r=t.sent,l(r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)(O,{}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-4",children:Object(h.jsx)("form",{onSubmit:D,children:Object(h.jsxs)(x.a,{children:[Object(h.jsx)(m.a,{title:p?"Edit Category":"Add Category"}),Object(h.jsxs)(f.a,{children:[Object(h.jsxs)(A.a,{fullWidth:!0,required:!0,children:[Object(h.jsx)(B.a,{htmlFor:"description",children:"Description"}),Object(h.jsx)(P.a,{id:"description","aria-describedby":"my-helper-text",type:"description",name:"description",value:z,onChange:function(e){var t=e.target;T(Object(E.a)(Object(E.a)({},N),{},Object(w.a)({},t.name,t.value)))}})]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)(W.a,{variant:"contained",color:"primary",type:"submit",children:p?"Edit":"Save"})]})]})})}),Object(h.jsx)("div",{className:"col-8",children:Object(h.jsx)(I.a,{children:Object(h.jsxs)(J.a,{"aria-label":"users table",children:[Object(h.jsx)(G.a,{children:Object(h.jsxs)(Y.a,{children:[Object(h.jsx)(R.a,{children:"Description"}),Object(h.jsx)(R.a,{children:"User"}),Object(h.jsx)(R.a,{children:"Actions"})]})}),Object(h.jsx)(H.a,{children:a.map((function(e){return Object(h.jsxs)(Y.a,{children:[Object(h.jsx)(R.a,{component:"th",scope:"row",children:e.description}),Object(h.jsx)(R.a,{children:"".concat(e.user.firstName," ").concat(e.user.lastName)}),Object(h.jsxs)(R.a,{children:[Object(h.jsx)(_.a,{"aria-label":"delete",onClick:function(){return t=e.id,void S.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&(M(t),S.a.fire("Deleted!",j.msg,"success"))}));var t},children:Object(h.jsx)(K.a,{})}),Object(h.jsx)(_.a,{"aria-label":"edit",onClick:function(){return T(e),void v(!0)},children:Object(h.jsx)(Q.a,{})})]})]},e.id)}))})]})})})]})]})},ne=n(107),ce=function(e){var t=e.isAuthenticated,n=e.component,c=Object(ne.a)(e,["isAuthenticated","component"]);return Object(h.jsx)(o.b,Object(E.a)(Object(E.a)({},c),{},{component:function(e){return t?Object(h.jsx)(n,Object(E.a)({},e)):Object(h.jsx)(o.a,{to:"/"})}}))},ae=function(e){for(var t=e.isAuthenticated,n=e.component,c=arguments.length,a=new Array(c>1?c-1:0),r=1;r<c;r++)a[r-1]=arguments[r];return Object(h.jsx)(o.b,Object(E.a)(Object(E.a)({},a),{},{component:function(e){return t?Object(h.jsx)(o.a,{to:"/"}):Object(h.jsx)(n,Object(E.a)({},e))}}))},re=n(268),se="https://fs-posts.herokuapp.com/api",ie=function(){var e=Object(c.useContext)(d).user,t=Object(c.useState)([]),n=Object(s.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)({}),o=Object(s.a)(i,2),j=o[0],l=o[1],b=Object(c.useState)(!1),u=Object(s.a)(b,2),p=u[0],v=u[1],g=Object(c.useState)([]),y=Object(s.a)(g,2),N=y[0],T=y[1],D=Object(c.useState)({title:"",description:"",category:"",id:""}),U=Object(s.a)(D,2),F=U[0],z=U[1],M=function(e){var t=e.target;z(Object(E.a)(Object(E.a)({},F),{},Object(w.a)({},t.name,t.value)))},V=function(){var t=Object(k.a)(C.a.mark((function t(n){var c,a,r,s,i;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!X()){t.next=19;break}if(c={method:p?"PUT":"POST",headers:{"Content-Type":"application/json","x-token":"".concat(e.token)},body:JSON.stringify(F)},p){t.next=14;break}return t.next=6,fetch("".concat(se,"/post"),c);case 6:return a=t.sent,t.next=9,a.json();case 9:r=t.sent,s=r.msg,201!==a.status?Z("Error!",s):(Z("Ok","Post has been added"),ee(),$(),v(!1)),t.next=19;break;case 14:return i=F.id,t.next=17,fetch("".concat(se,"/post/").concat(i),c);case 17:200!==t.sent.status?Z("Error!","Error has occurred contact your admin"):(Z("Ok","Post has been edited"),ee(),$());case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),X=function(){return 0===ne.trim().length||ne.trim().length<3?(Z("Error!","Write a valid title"),!1):0===ae.trim().length?(Z("Error!","Select a valid category"),!1):!(0===ce.trim().length||ce.trim().length<50)||(Z("Error!","Write a valid description"),!1)},Z=function(e,t){S.a.fire({title:e,text:t,timer:2e3,position:"bottom-right",timerProgressBar:!0,showConfirmButton:!1,allowOutsideClick:!1}).then((function(e){e.dismiss,S.a.DismissReason.timer}))},$=function(){z({title:"",description:"",category:"",id:""})},ee=function(){var t=Object(k.a)(C.a.mark((function t(){var n,c,a,s;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"GET",headers:{"Content-Type":"application/json","x-token":"".concat(e.token)}},t.next=3,fetch("".concat(se,"/post"),n);case 3:return c=t.sent,t.next=6,c.json();case 6:a=t.sent,s=a.posts,r(s);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),te=function(){var t=Object(k.a)(C.a.mark((function t(){var n,c,a,r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"GET",headers:{"Content-Type":"application/json","x-token":"".concat(e.token)}},t.next=3,fetch("".concat(se,"/category"),n);case 3:return c=t.sent,t.next=6,c.json();case 6:a=t.sent,r=a.categories,T(r);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ne=F.title,ce=F.description,ae=F.category;Object(c.useEffect)((function(){ee()}),[j]),Object(c.useEffect)((function(){te()}),[]);var ie=function(){var t=Object(k.a)(C.a.mark((function t(n){var c,a,r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={method:"DELETE",headers:{"Content-Type":"application/json","x-token":"".concat(e.token)}},t.next=3,fetch("".concat(se,"/post/").concat(n),c);case 3:return a=t.sent,t.next=6,a.json();case 6:r=t.sent,l(r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)(O,{}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-4",children:Object(h.jsx)("form",{onSubmit:V,children:Object(h.jsxs)(x.a,{children:[Object(h.jsx)(m.a,{title:p?"Edit Post":"Add Post"}),Object(h.jsxs)(f.a,{children:[Object(h.jsxs)(A.a,{fullWidth:!0,required:!0,children:[Object(h.jsx)(B.a,{htmlFor:"description",children:"title"}),Object(h.jsx)(P.a,{id:"title","aria-describedby":"my-helper-text",type:"text",name:"title",value:ne,onChange:M})]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsxs)(A.a,{fullWidth:!0,required:!0,children:[Object(h.jsx)(B.a,{id:"category",children:"Category"}),Object(h.jsx)(L.a,{labelId:"category",id:"category",value:ae,onChange:M,name:"category",children:N.map((function(e){return Object(h.jsx)(q.a,{value:e.id,children:e.description},e.id)}))})]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)(re.a,{id:"description",label:"Description",required:!0,type:"text",name:"description",value:ce,onChange:M,multiline:!0,rows:7,fullWidth:!0,helperText:"min 50 characters."}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)(W.a,{variant:"contained",color:"primary",type:"submit",children:p?"Edit":"Save"})]})]})})}),Object(h.jsx)("div",{className:"col-8",children:Object(h.jsx)(I.a,{children:Object(h.jsxs)(J.a,{"aria-label":"users table",children:[Object(h.jsx)(G.a,{children:Object(h.jsxs)(Y.a,{children:[Object(h.jsx)(R.a,{children:"Title"}),Object(h.jsx)(R.a,{children:"Category"}),Object(h.jsx)(R.a,{children:"User"}),Object(h.jsx)(R.a,{children:"Actions"})]})}),Object(h.jsx)(H.a,{children:a.map((function(e){return Object(h.jsxs)(Y.a,{children:[Object(h.jsx)(R.a,{component:"th",scope:"row",children:e.title}),Object(h.jsx)(R.a,{children:"".concat(e.category.description)}),Object(h.jsx)(R.a,{children:"".concat(e.user.firstName," ").concat(e.user.lastName)}),Object(h.jsxs)(R.a,{children:[Object(h.jsx)(_.a,{"aria-label":"delete",onClick:function(){return t=e.id,void S.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&(ie(t),S.a.fire("Deleted!",j.msg,"success"))}));var t},children:Object(h.jsx)(K.a,{})}),Object(h.jsx)(_.a,{"aria-label":"edit",onClick:function(){return function(e){var t=e.id,n=e.title,c=e.description,a=e.category._id;z({id:t,title:n,description:c,category:a}),v(!0)}(e)},children:Object(h.jsx)(Q.a,{})})]})]},e.id)}))})]})})})]})]})},oe=function(){var e=Object(c.useContext)(d).user;return Object(h.jsx)(i.a,{children:Object(h.jsx)("div",{children:Object(h.jsxs)(o.d,{children:[Object(h.jsx)(ae,{exact:!0,path:"/login",component:F,isAuthenticated:e.logged}),"admin"===e.role?Object(h.jsx)(ce,{exact:!0,path:"/users",component:$,isAuthenticated:e.logged}):null,Object(h.jsx)(ce,{exact:!0,path:"/categories",component:te,isAuthenticated:e.logged}),Object(h.jsx)(ce,{exact:!0,path:"/posts",component:ie,isAuthenticated:e.logged}),Object(h.jsx)(o.b,{exact:!0,path:"/",component:y}),Object(h.jsx)(o.a,{to:"/"})]})})})},je=(n(215),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(E.a)(Object(E.a)({},t.payload),{},{logged:!0});case u:return{logged:!1};default:return e}}),le=function(){return JSON.parse(localStorage.getItem("user"))||{logged:!1}};var de=function(){var e=Object(c.useReducer)(je,{},le),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){localStorage.setItem("user",JSON.stringify(n))}),[n]),Object(h.jsx)(d.Provider,{value:{user:n,dispatch:a},children:Object(h.jsx)(oe,{})})},be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,270)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};r.a.render(Object(h.jsx)(de,{}),document.getElementById("root")),be()}},[[216,1,2]]]);
//# sourceMappingURL=main.75f8934c.chunk.js.map